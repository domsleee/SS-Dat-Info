var b=Object.defineProperty;var I=(t,e,r)=>e in t?b(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var u=(t,e,r)=>I(t,typeof e!="symbol"?e+"":e,r);import"./modulepreload-polyfill-B5Qt9EMX.js";class c extends Error{constructor(r,n){super(`Line ${n}: ${r}`);u(this,"line");this.line=n}}class p{constructor(e){u(this,"input");u(this,"pos");u(this,"line");this.input=e,this.pos=0,this.line=1}current(){return this.pos<this.input.length?this.input[this.pos]:null}advance(){return this.current()===`
`&&this.line++,this.pos++,this}skipWhitespace(){for(;this.current()&&/[\s\t\n\r]/.test(this.current());)this.advance();return this}getPosition(){return{pos:this.pos,line:this.line,current:this.current()}}static async fromFile(e){const n=await(await fetch(e)).text();return new p(n)}}class j{constructor(e){u(this,"reader");this.reader=e instanceof p?e:new p(e)}parseIdentifier(){let e="";for(;this.reader.current()&&/[a-zA-Z0-9_]/.test(this.reader.current());)e+=this.reader.current(),this.reader.advance();if(e.length===0)throw new c("Expected identifier",this.reader.line);return e}parseString(){this.reader.advance();let e="";for(;this.reader.current()&&this.reader.current()!=='"';)e+=this.reader.current(),this.reader.advance();if(this.reader.current()!=='"')throw new c("Unterminated string",this.reader.line);return this.reader.advance(),e}parseVectorContents(){const e=[];let r="";const n=()=>{r.trim()&&(e.push(r.trim()),r="")};for(;this.reader.current()&&this.reader.current()!=="}";)this.reader.current()==="{"?(this.reader.advance(),e.push(this.parseVectorContents())):this.reader.current()===","?(n(),this.reader.advance()):/[\s\t\n\r]/.test(this.reader.current())?(n(),this.reader.advance()):(r+=this.reader.current(),this.reader.advance());if(n(),this.reader.current()==="}")this.reader.advance();else throw new c("Expected } in vector",this.reader.line);return e}parseVector(){return this.reader.advance(),this.parseVectorContents()}parseValue(){if(this.reader.skipWhitespace(),!this.reader.current())throw new c("Unexpected end of input while parsing value",this.reader.line);if(this.reader.current()==="{")return this.parseVector();if(this.reader.current()==='"')return this.parseString();{let e="";for(;this.reader.current()&&!/[\s\t\n\r;]/.test(this.reader.current());)e+=this.reader.current(),this.reader.advance();return e}}parseProperty(){this.reader.skipWhitespace();const e=this.parseIdentifier();if(this.reader.skipWhitespace(),this.reader.current()!=="=")throw new c(`Expected = after property name "${e}"`,this.reader.line);this.reader.advance();const r=this.parseValue();return this.reader.skipWhitespace(),this.reader.current()===";"&&this.reader.advance(),{name:e,value:r}}parseObject(){this.reader.skipWhitespace();const e=this.parseIdentifier();if(this.reader.skipWhitespace(),this.reader.current()!=="{")throw new c(`Expected { after object name "${e}"`,this.reader.line);this.reader.advance();const r={};for(;this.reader.current()&&this.reader.current()!=="}";){const{name:n,value:s}=this.parseProperty();r[n]=s,this.reader.skipWhitespace()}if(this.reader.current()!=="}")throw new c(`Expected } to close object "${e}"`,this.reader.line);return this.reader.advance(),this.reader.skipWhitespace(),this.reader.current()===";"&&this.reader.advance(),{type:e,properties:r}}parse(){const e=[];for(;this.reader.pos<this.reader.input.length&&(this.reader.skipWhitespace(),!!this.reader.current());)e.push(this.parseObject());return e}getPosition(){return this.reader.getPosition()}}function $(t={}){const e={name:"Audience_4",count:10,radius:90,uniform_scale:.2,centerLoc:{x:248.844,y:-45.5154,z:1096.15},quat:{w:1,x:0,y:0,z:0},...t},r=[];for(let n=0;n<e.count;n++){const s=n/e.count*2*Math.PI,y=e.radius*Math.cos(s),m=e.radius*Math.sin(s),d=F({x:y,y:m,z:0},e.quat),h=s+Math.PI/2,f={w:Math.cos(h/2),x:0,y:0,z:Math.sin(h/2)},a=w(e.quat,f),x={x:o(g(d.x)),y:o(g(d.y)),z:o(g(d.z))},l={w:o(a.w),x:o(a.x),y:o(a.y),z:o(a.z)};r.push({name:e.name,loc:e.centerLoc,uniform_scale:e.uniform_scale,quat:l,offset:x})}return r}function F(t,e){const r={w:0,x:t.x,y:t.y,z:t.z},n={w:e.w,x:-e.x,y:-e.y,z:-e.z},s=w(w(e,r),n);return{x:s.x,y:s.y,z:s.z}}function w(t,e){return{w:t.w*e.w-t.x*e.x-t.y*e.y-t.z*e.z,x:t.w*e.x+t.x*e.w+t.y*e.z-t.z*e.y,y:t.w*e.y-t.x*e.z+t.y*e.w+t.z*e.x,z:t.w*e.z+t.x*e.y-t.y*e.x+t.z*e.w}}function g(t){return Math.round(t*1e3)/1e3}function o(t,e=1e-12){return Math.abs(t)<e?0:t}function L(t){return t.map(e=>`${e.name} {
uniform_scale = ${e.uniform_scale.toFixed(3)};
loc = {${e.loc.x}, ${e.loc.y}, ${e.loc.z}};
level_inclusion_mask = -1;
offset = {${e.offset.x.toFixed(3)}, ${e.offset.y.toFixed(3)}, ${e.offset.z.toFixed(3)}};
quat = {${e.quat.w.toFixed(6)}, {${e.quat.x.toFixed(6)}, ${e.quat.y.toFixed(6)}, ${e.quat.z.toFixed(6)}}};
melt_height = 0;
};`).join(`

`)}document.addEventListener("DOMContentLoaded",function(){localStorage.getItem("darkMode")!=="false"&&document.documentElement.classList.add("dark");const t=document.getElementById("generate"),e=document.getElementById("copyToClipboard"),r=document.getElementById("outputResult");document.getElementById("themeToggle").addEventListener("click",B),t.addEventListener("click",n);function n(){const s=document.getElementById("outputStatus"),m=document.getElementById("selectObjectName").value,v=document.getElementById("radiusValue").value,d=document.getElementById("numObjectsValue").value,h=document.getElementById("uniformScaleValue").value,f=document.getElementById("inputObjects").value;try{const x=new j(f??"").parse(),l=[];let z=0;for(const k of x){const i=k.properties,E=$({name:m,radius:parseFloat(v),centerLoc:{x:parseFloat(i.loc[0]),y:parseFloat(i.loc[1]),z:parseFloat(i.loc[2])},count:parseInt(d),uniform_scale:parseFloat(h),quat:{w:parseFloat(i.quat[0]),x:parseFloat(i.quat[1][0]),y:parseFloat(i.quat[1][1]),z:parseFloat(i.quat[1][2])}});l.push(L(E)),z+=E.length}r.value=l.join(`

`),s.innerText=`Generated ${z} objects.`}catch(a){throw s.innerText=`Error: ${a}`,a}}e.addEventListener("click",function(){r.select(),document.execCommand("copy");const s=this.textContent;this.textContent="Copied!",this.classList.add("text-green-600","dark:text-green-400"),setTimeout(()=>{this.textContent=s,this.classList.remove("text-green-600","dark:text-green-400")},2e3)})});function B(){const t=document.documentElement;t.classList.toggle("dark"),localStorage.setItem("darkMode",t.classList.contains("dark").toString())}
